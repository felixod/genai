define("qbank_genai/autotag",["exports","core/ajax","qbank_genai/selectors"],(function(_exports,_ajax,_selectors){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * AMD module for the AutoTag feature.
   *
   * @module     qbank_genai/autotag
   * @copyright  2025 Christian Gr√©visse <christian.grevisse@uni.lu>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_selectors=_interopRequireDefault(_selectors);class AutoTag{constructor(questionlist){this.questionlist=questionlist,this.registerEventListeners(),this.hideMessage()}registerEventListeners(){const tagger=document.querySelector(_selectors.default.ELEMENTS.AUTOTAGBUTTON);tagger&&tagger.addEventListener("click",(async()=>{this.hideMessage(),tagger.setAttribute("disabled","disabled");const oldText=tagger.innerHTML;tagger.innerHTML='<i class="fa fa-spinner fa-spin"></i>';const request={methodname:"qbank_genai_autotag_questions",args:{questionlist:this.questionlist}};try{const responseObj=await _ajax.default.call([request])[0];responseObj.error?this.showMessage(responseObj.error.exception.message,!0):this.showMessage(responseObj,!1)}catch(error){this.showMessage(error.message,!0)}finally{tagger.removeAttribute("disabled"),tagger.innerHTML=oldText}}))}showMessage(message,error){const errorField=document.querySelector(_selectors.default.ELEMENTS.RESULTFIELD);errorField&&(errorField.innerHTML=message,errorField.style.display="block",errorField.classList.add(error?"alert-danger":"alert-info"))}hideMessage(){const errorField=document.querySelector(_selectors.default.ELEMENTS.RESULTFIELD);errorField&&(errorField.innerHTML="",errorField.style.display="none",errorField.classList.remove("alert-info","alert-danger"))}}_exports.init=questionlist=>{new AutoTag(questionlist)}}));

//# sourceMappingURL=autotag.min.js.map